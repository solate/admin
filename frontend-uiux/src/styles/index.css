/**
 * 全局样式入口
 * 统一导入所有样式文件
 *
 * CSS 规则顺序：
 * 1. @import 语句
 * 2. @tailwind
 * 3. @layer
 * 4. 其他样式
 *
 * 注意：CSS 变量和辅助功能模式样式在 variables.css 中定义
 */

/* CSS 变量 (包含辅助功能模式样式) */
@import './variables.css';

/* 样式重置 */
@import './reset.css';

/* 基础样式 */
@import './base.css';

/* 布局样式 */
@import './layout.css';

/* Tailwind CSS */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Tailwind 基础层扩展 ===== */
@layer base {
  * {
    @apply border-slate-200 dark:border-slate-700;
  }

  body {
    @apply bg-[#F8FAFC] dark:bg-slate-900 text-slate-900 dark:text-slate-100;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  html {
    scroll-behavior: smooth;
  }

  /* 自定义滚动条 */
  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-slate-100 dark:bg-slate-800;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-slate-300 dark:bg-slate-600 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-slate-400 dark:bg-slate-500;
  }

  /* 焦点状态 - 可访问性 */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 dark:ring-offset-slate-900;
  }

  /* 平滑过渡 */
  button,
  a,
  input,
  textarea,
  select {
    @apply transition-colors duration-200;
  }
}

/* ===== Tailwind 组件层 ===== */
@layer components {
  /* 动态主题色类 */
  .bg-primary-50 { background-color: rgb(var(--color-primary) / 0.05); }
  .bg-primary-100 { background-color: rgb(var(--color-primary) / 0.1); }
  .bg-primary-200 { background-color: rgb(var(--color-primary) / 0.2); }
  .bg-primary-300 { background-color: rgb(var(--color-primary) / 0.35); }
  .bg-primary-400 { background-color: rgb(var(--color-primary) / 0.5); }
  .bg-primary-500 { background-color: rgb(var(--color-primary) / 0.75); }
  .bg-primary-600 { background-color: rgb(var(--color-primary) / 1); }
  .bg-primary-700 { background-color: rgb(var(--color-primary) / 1); }
  .bg-primary-800 { background-color: rgb(var(--color-primary) / 1); }
  .bg-primary-900 { background-color: rgb(var(--color-primary) / 1); }

  .text-primary-50 { color: rgb(var(--color-primary) / 0.05); }
  .text-primary-100 { color: rgb(var(--color-primary) / 0.1); }
  .text-primary-200 { color: rgb(var(--color-primary) / 0.2); }
  .text-primary-300 { color: rgb(var(--color-primary) / 0.35); }
  .text-primary-400 { color: rgb(var(--color-primary) / 0.5); }
  .text-primary-500 { color: rgb(var(--color-primary) / 0.75); }
  .text-primary-600 { color: rgb(var(--color-primary) / 1); }
  .text-primary-700 { color: rgb(var(--color-primary) / 1); }
  .text-primary-800 { color: rgb(var(--color-primary) / 1); }
  .text-primary-900 { color: rgb(var(--color-primary) / 1); }

  .border-primary-50 { border-color: rgb(var(--color-primary) / 0.05); }
  .border-primary-100 { border-color: rgb(var(--color-primary) / 0.1); }
  .border-primary-200 { border-color: rgb(var(--color-primary) / 0.2); }
  .border-primary-500 { border-color: rgb(var(--color-primary) / 0.75); }
  .border-primary-600 { border-color: rgb(var(--color-primary) / 1); }

  .ring-primary-500 { --tw-ring-color: rgb(var(--color-primary) / 0.75); }
  .ring-primary-600 { --tw-ring-color: rgb(var(--color-primary) / 1); }

  .shadow-primary-500\/25 { box-shadow: 0 10px 15px -3px rgb(var(--color-primary) / 0.25), 0 4px 6px -4px rgb(var(--color-primary) / 0.25); }
  .shadow-primary-500\/30 { box-shadow: 0 10px 15px -3px rgb(var(--color-primary) / 0.3), 0 4px 6px -4px rgb(var(--color-primary) / 0.3); }
  .shadow-primary-500\/10 { box-shadow: 0 1px 3px 0 rgb(var(--color-primary) / 0.1), 0 1px 2px -1px rgb(var(--color-primary) / 0.1); }

  /* 暗色模式主题色 */
  .dark .bg-primary-900\/30 { background-color: rgb(var(--color-primary) / 0.15); }
  .dark .text-primary-300 { color: rgb(var(--color-primary) / 0.7); }
  .dark .text-primary-400 { color: rgb(var(--color-primary) / 0.6); }
  .dark .border-primary-800\/50 { border-color: rgb(var(--color-primary) / 0.3); }

  /* 玻璃效果 - 优化深浅模式 */
  .glass {
    @apply bg-white/90 dark:bg-slate-800/90 backdrop-blur-md border border-slate-200/50 dark:border-slate-700/50;
  }

  .glass-card {
    @apply bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-card);
  }

  .glass-card-hover {
    @apply bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-card);
    transition: all 0.2s;
  }
  .glass-card-hover:hover {
    box-shadow: var(--shadow-card-hover);
    @apply border-slate-300 dark:border-slate-600;
  }

  /* 卡片变体 - 使用动态圆角 */
  .card {
    @apply bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-card);
  }

  .card-elevated {
    @apply bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-panel);
  }

  /* 渐变 */
  .gradient-primary {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
  }

  .gradient-cta {
    background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  }
}

/* ===== Tailwind 工具层 ===== */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* ===== 响应式动画偏好 ===== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* 用户偏好设置 - 禁用动画 */
.no-animation,
.no-animation *,
.no-animation *::before,
.no-animation *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

/* ========================================
   全局圆角覆盖 - 必须放在 Tailwind 之后
   覆盖所有 Tailwind 圆角类以响应主题设置
   ======================================== */

/* 按钮圆角 */
button.rounded-lg,
button.rounded-md,
button.rounded-xl,
button.rounded-2xl,
button.rounded-3xl {
  border-radius: var(--border-radius) !important;
}

button.rounded-sm {
  border-radius: calc(var(--border-radius) * 0.5) !important;
}

/* 输入框圆角 */
input.rounded-lg,
input.rounded-md,
input.rounded-xl,
select.rounded-lg,
select.rounded-md,
select.rounded-xl,
textarea.rounded-lg,
textarea.rounded-md,
textarea.rounded-xl {
  border-radius: var(--border-radius) !important;
}

/* 链接圆角 */
a.rounded-lg,
a.rounded-md,
a.rounded-xl,
a.rounded-2xl {
  border-radius: var(--border-radius) !important;
}

/* Div 圆角 - 卡片、面板等 */
div.rounded-lg,
div.rounded-md {
  border-radius: var(--border-radius) !important;
}

div.rounded-xl {
  border-radius: calc(var(--border-radius) * 1.5) !important;
}

div.rounded-2xl {
  border-radius: calc(var(--border-radius) * 2) !important;
}

div.rounded-3xl {
  border-radius: calc(var(--border-radius) * 2.5) !important;
}

/* Span 圆角 */
span.rounded-lg,
span.rounded-md,
span.rounded-xl {
  border-radius: var(--border-radius) !important;
}

/* 无圆角和全圆角 - 保持不变 */
.rounded-none {
  border-radius: 0 !important;
}

.rounded-full {
  border-radius: 9999px !important;
}
