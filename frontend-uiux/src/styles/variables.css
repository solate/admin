/**
 * CSS 变量定义
 * 统一管理全局设计系统变量
 *
 * 注意：
 * - 主题色使用 RGB 空格分隔格式，便于 Tailwind 的 rgb() 函数使用
 * - --color-primary 由 JS 动态设置，这里只是默认值
 */

:root {
  /* ===== 主题色 (由 JS 动态设置，此处为默认值) ===== */
  --color-primary: 37 99 235;
  --color-primary-hsl: 220 100% 54%;
  --color-cta: 249 115 22;

  /* 语义色 */
  --color-success: 16 185 129;
  --color-warning: 245 158 11;
  --color-error: 239 68 68;
  --color-info: 59 130 246;

  /* 背景和文字色 */
  --color-bg: 248 250 252;
  --color-text: 30 41 59;

  /* ===== 中性色 (固定色板) ===== */
  --color-gray-50: #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-300: #d1d5db;
  --color-gray-400: #9ca3af;
  --color-gray-500: #6b7280;
  --color-gray-600: #4b5563;
  --color-gray-700: #374151;
  --color-gray-800: #1f2937;
  --color-gray-900: #111827;

  /* ===== 间距 ===== */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;
  --spacing-3xl: 4rem;

  /* ===== 圆角 ===== */
  /* 用户可调整的全局圆角值 (由 JS 动态设置) */
  --border-radius: 0.5rem;

  /* 固定圆角级别 */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;
  --radius-full: 9999px;

  /* ===== 阴影 ===== */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-card-hover: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-panel: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

  /* ===== 过渡 ===== */
  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
  --transition-slow: 300ms ease;

  /* ===== 字体 ===== */
  --font-sans: 'Fira Sans', system-ui, -apple-system, sans-serif;
  --font-mono: 'Fira Code', 'SF Mono', Monaco, 'Cascadia Code', monospace;

  /* 字体大小 */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 1.875rem;
  --text-4xl: 2.25rem;

  /* ===== Z-index ===== */
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-modal-backdrop: 1040;
  --z-modal: 1050;
  --z-popover: 1060;
  --z-tooltip: 1070;
}

/* ===== 暗色模式变量覆盖 ===== */
.dark {
  --color-primary: 59 130 246;
  --color-cta: 251 146 60;
  --color-bg: 15 23 42;
  --color-text: 241 245 249;

  /* 暗色模式下灰色色板反转 */
  --color-gray-50: #111827;
  --color-gray-100: #1f2937;
  --color-gray-200: #374151;
  --color-gray-300: #4b5563;
  --color-gray-400: #6b7280;
  --color-gray-500: #9ca3af;
  --color-gray-600: #d1d5db;
  --color-gray-700: #e5e7eb;
  --color-gray-800: #f3f4f6;
  --color-gray-900: #f9fafb;
}

/* ========================================
   辅助功能模式 (Accessibility Modes)
   ======================================== */

/* 灰色模式 */
[data-gray-mode="true"],
[data-gray-mode="true"] * {
  filter: grayscale(100%) !important;
}

/* 高对比度模式 */
[data-high-contrast="true"] {
  --contrast-enhancement: contrast(1.2) saturate(1.3);
}
[data-high-contrast="true"] * {
  filter: var(--contrast-enhancement, none);
}

/* ========================================
   色彩视觉模式 (Color Vision Modes)
   使用 SVG 滤镜引用 App.vue 中定义的滤镜
   ======================================== */

/* 红色盲 (Protanopia) - 无法感知红色 */
[data-color-blind="protanopia"] {
  filter: url("#protanopia-filter");
}

/* 绿色盲 (Deuteranopia) - 无法感知绿色 */
[data-color-blind="deuteranopia"] {
  filter: url("#deuteranopia-filter");
}

/* 蓝色盲 (Tritanopia) - 无法感知蓝色 */
[data-color-blind="tritanopia"] {
  filter: url("#tritanopia-filter");
}

/* 红色弱 (Protanomaly) - 红色敏感度降低 */
[data-color-blind="protanomaly"] {
  filter: url("#protanomaly-filter");
}

/* 绿色弱 (Deuteranomaly) - 绿色敏感度降低（最常见） */
[data-color-blind="deuteranomaly"] {
  filter: url("#deuteranomaly-filter");
}

/* 蓝色弱 (Tritanomaly) - 蓝色敏感度降低 */
[data-color-blind="tritanomaly"] {
  filter: url("#tritanomaly-filter");
}

/* 全色盲 (Achromatopsia) - 只能看到灰度 */
[data-color-blind="achromatopsia"] {
  filter: grayscale(100%);
}

/* ========================================
   深色导航模式 (Dark Navigation Modes)
   在浅色主题下使用深色侧边栏/顶栏
   ======================================== */

/* 深色顶栏 */
[data-dark-header="true"] .topbar,
[data-dark-header="true"] header {
  background: rgba(30, 41, 59, 0.95) !important;
  backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(51, 65, 85, 0.5) !important;
}

/* 深色顶栏内的元素颜色覆盖 */
[data-dark-header="true"] header .bg-slate-100,
[data-dark-header="true"] header .hover\:bg-slate-100:hover {
  background: rgba(51, 65, 85, 0.8) !important;
}

[data-dark-header="true"] header .hover\:bg-slate-200:hover {
  background: rgba(71, 85, 105, 0.8) !important;
}

[data-dark-header="true"] header .hover\:bg-slate-700:hover,
[data-dark-header="true"] header .hover\:bg-slate-700\/50:hover {
  background: rgba(51, 65, 85, 0.5) !important;
}

[data-dark-header="true"] header kbd,
[data-dark-header="true"] header .bg-white {
  background: rgba(15, 23, 42, 0.9) !important;
  border-color: rgba(71, 85, 105, 0.5) !important;
}

[data-dark-header="true"] header .border-slate-300,
[data-dark-header="true"] header .border-slate-200\/60 {
  border-color: rgba(71, 85, 105, 0.5) !important;
}

[data-dark-header="true"] header .text-slate-900,
[data-dark-header="true"] header .text-slate-800,
[data-dark-header="true"] header .text-slate-700 {
  color: rgb(241, 245, 249) !important;
}

[data-dark-header="true"] header .text-slate-600 {
  color: rgb(203, 213, 225) !important;
}

[data-dark-header="true"] header .text-slate-500,
[data-dark-header="true"] header .text-slate-400 {
  color: rgb(148, 163, 184) !important;
}

[data-dark-header="true"] header .hover\:text-slate-700:hover,
[data-dark-header="true"] header .group-hover\:text-slate-700:hover,
[data-dark-header="true"] header .group:hover .group-hover\:text-slate-700 {
  color: rgb(226, 232, 240) !important;
}

[data-dark-header="true"] header .hover\:text-slate-300:hover {
  color: rgb(203, 213, 225) !important;
}

[data-dark-header="true"] header .group-hover\:text-slate-200:hover,
[data-dark-header="true"] header .group:hover .group-hover\:text-slate-200 {
  color: rgb(226, 232, 240) !important;
}

[data-dark-header="true"] header .bg-primary-50 {
  background: rgba(59, 130, 246, 0.2) !important;
}

[data-dark-header="true"] header .ring-white {
  --tw-ring-color: rgba(30, 41, 59, 1) !important;
}

[data-dark-header="true"] header .ring-offset-2 {
  --tw-ring-offset-color: rgba(30, 41, 59, 1) !important;
}

[data-dark-header="true"] header nav .text-slate-400 {
  color: rgb(100, 116, 139) !important;
}

/* 深色侧边栏 */
[data-dark-sidebar="true"] .sidebar {
  background: rgba(30, 41, 59, 0.95) !important;
  border-right: 1px solid rgba(51, 65, 85, 0.5) !important;
}

[data-dark-sidebar="true"] .sidebar .text-slate-900,
[data-dark-sidebar="true"] .sidebar .text-slate-800 {
  color: rgb(241, 245, 249) !important;
}

[data-dark-sidebar="true"] .sidebar .text-slate-600,
[data-dark-sidebar="true"] .sidebar .text-slate-500,
[data-dark-sidebar="true"] .sidebar .text-slate-400 {
  color: rgb(148, 163, 184) !important;
}

[data-dark-sidebar="true"] .sidebar .border-slate-200\/60,
[data-dark-sidebar="true"] .sidebar .border-slate-200\/50 {
  border-color: rgba(51, 65, 85, 0.5) !important;
}

[data-dark-sidebar="true"] .sidebar .bg-slate-50,
[data-dark-sidebar="true"] .sidebar .hover\:bg-slate-50:hover,
[data-dark-sidebar="true"] .sidebar .hover\:bg-slate-100:hover {
  background: rgba(51, 65, 85, 0.5) !important;
}

[data-dark-sidebar="true"] .sidebar nav a {
  color: rgb(203, 213, 225) !important;
}

[data-dark-sidebar="true"] .sidebar nav a:hover {
  background: rgba(51, 65, 85, 0.5) !important;
  color: rgb(241, 245, 249) !important;
}

[data-dark-sidebar="true"] .sidebar nav a.router-link-active,
[data-dark-sidebar="true"] .sidebar nav a.bg-primary-50 {
  background: rgba(59, 130, 246, 0.2) !important;
}
